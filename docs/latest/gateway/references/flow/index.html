<!DOCTYPE html>
<html lang="zh" dir=>

<head>
  <meta name="generator" content="Hugo 0.79.1" />
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
<meta name="description" content="处理流程 #  流程定义 #  每一个网关接收到的请求都会通过一系列的流程处理，最后才返回给客户端，流程的定义在极限网关里面叫做 flow，以下面的这个例子为例：
flow: - name: hello_world filter: - echo: message: &quot;hello gateway\n&quot; repeat: 1 - name: not_found filter: - echo: message: &#39;404 not found\n&#39; repeat: 1 上面的例子定义了两个 flow hello_world 和 not_found， 每个 flow 都使用了一个名为 echo 的过滤器，用来输出一段字符串，每个 flow 下面可以定义一系列 filter，他们按照定义的顺序依次执行。
语法说明 #  极限网关采用约定的格式来定义流程，并且支持灵活的条件参数来进行逻辑判断，具体的格式定义如下：
flow: - name: &lt;flow_name&gt; filter: - &lt;filter_name&gt;: when: &lt;condition&gt; &lt;parameters&gt; - &lt;filter_name&gt;: when: &lt;condition&gt; &lt;parameters&gt; ... 上面的 filter_name 代表具体的某个过滤器名称，用来执行特定的任务，when 下面的 condition 用来定义特定的满足执行该任务的条件参数，不满足条件的情况下会跳过该过滤器任务的执行，parameters 里面设置的该过滤器相关的参数，如果多个参数依次换行即可。">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="处理流程" />
<meta property="og:description" content="处理流程 #  流程定义 #  每一个网关接收到的请求都会通过一系列的流程处理，最后才返回给客户端，流程的定义在极限网关里面叫做 flow，以下面的这个例子为例：
flow: - name: hello_world filter: - echo: message: &quot;hello gateway\n&quot; repeat: 1 - name: not_found filter: - echo: message: &#39;404 not found\n&#39; repeat: 1 上面的例子定义了两个 flow hello_world 和 not_found， 每个 flow 都使用了一个名为 echo 的过滤器，用来输出一段字符串，每个 flow 下面可以定义一系列 filter，他们按照定义的顺序依次执行。
语法说明 #  极限网关采用约定的格式来定义流程，并且支持灵活的条件参数来进行逻辑判断，具体的格式定义如下：
flow: - name: &lt;flow_name&gt; filter: - &lt;filter_name&gt;: when: &lt;condition&gt; &lt;parameters&gt; - &lt;filter_name&gt;: when: &lt;condition&gt; &lt;parameters&gt; ... 上面的 filter_name 代表具体的某个过滤器名称，用来执行特定的任务，when 下面的 condition 用来定义特定的满足执行该任务的条件参数，不满足条件的情况下会跳过该过滤器任务的执行，parameters 里面设置的该过滤器相关的参数，如果多个参数依次换行即可。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/latest/gateway/references/flow/" />

<title>处理流程 | INFINI Labs</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="alternate" hreflang="en" href="/en/docs/latest/gateway/references/flow/" title="Handling Flow">

<link rel="stylesheet" href="/book.min.bcadf4033b2252dab4049fde8573c3463e8a6e7631793c2a9caa2f0f7a609c4e.css" integrity="sha256-vK30AzsiUtq0BJ/ehXPDRj6KbnYxeTwqnKovD3pgnE4=">
<link rel="stylesheet" href="/infini.min.405c91a9e57eb21831efb090ad1ead44dfc1b6b5324bf7d9d23bbe808ff2b085.css" integrity="sha256-QFyRqeV&#43;shgx77CQrR6tRN/BtrUyS/fZ0ju&#43;gI/ysIU=">
<script defer src="/zh.search.min.69d13abb1c75aacccfdce0c35273af51606e98808741fbf0e996f44f712c1df1.js" integrity="sha256-adE6uxx1qszP3ODDUnOvUWBumICHQfvw6Zb0T3EsHfE="></script>






<script type="text/javascript"  src="/js/jquery-2.x.min.js"></script>
<script defer src="/js/doc.js"></script>

  
</head>

<body dir=>

  <div class="common-header resize-padding">
    <a class="logo" href="/">
        <img src="/img/header/logo.svg" />
        <img class="moblie" src="/img/header/mobile-logo.svg" />
    </a>
    <div class="nav">
        <ul>
            
            <li class="menu ">
                <a class="menu-item" href="/">
                    首页
                </a>
                
            </li>
            
            <li class="menu sub-menu">
                <a class="menu-item" >
                    产品
                </a>
                
                <div class="sub-menu-content-wrap">
                    <div class="sub-menu-content">
                        
                        <a class="sub-menu-item" href="/">
                            
                                <div class="logo">
                                    <img src="/img/header/infini-search.svg"/>
                                </div>
                            
                            
                                <div class="desc">
                                    INFINI SEARCH PLATFORM
                                </div>
                            
                        </a>
                        
                        <a class="sub-menu-item" href="/products/console">
                            
                                <div class="name">
                                    INFINI Console
                                </div>
                            
                            
                                <div class="desc">
                                    一站式数据搜索分析与管理平台
                                </div>
                            
                        </a>
                        
                        <a class="sub-menu-item" href="/products/gateway">
                            
                                <div class="name">
                                    INFINI Gateway
                                </div>
                            
                            
                                <div class="desc">
                                    面向搜索场景的高性能网关
                                </div>
                            
                        </a>
                        
                    </div>
                </div>
                
            </li>
            
            <li class="menu ">
                <a class="menu-item" href="/pricing">
                    报价
                </a>
                
            </li>
            
            <li class="menu ">
                <a class="menu-item" href="/support">
                    文档
                </a>
                
            </li>
            
            <li class="menu ">
                <a class="menu-item" href="/download">
                    下载
                </a>
                
            </li>
            
            <li class="menu ">
                <a class="menu-item" href="/company">
                    关于
                </a>
                
            </li>
            
            <li class="menu lang">
                <a class="menu-item">
                    <img src="/img/header/lang.svg" />
                    <span>&nbsp;中文</span>
                </a>
            </li>
        </ul>
    </div>
    <div class="mobile-nav">
        <img 
            id="mobile-nav-menu-icon" 
            class="menu-icon" 
            onclick="onMenuTouch(true)" 
            src="/img/header/mobile-menu.svg"
        />
        <img 
            id="mobile-nav-menu-close-icon" 
            class="menu-icon close" 
            onclick="onMenuTouch(false)"
            src="/img/header/mobile-menu-close.svg"
        />
        <div id="mobile-nav-menu" class="menu">
            
                <a 
                    class="item" 
                    href="/"
                    onclick=""
                >
                    首页
                    
                </a>
                
            
                <a 
                    class="item" 
                    href="#"
                    onclick="onMenuCollapse(&#34;/products&#34;)"
                >
                    产品
                    
                    <img 
                        id="mobile-nav-menu-item-arrow" 
                        src="/img/header/mobile-menu-right.svg" 
                        data-active="false"
                    />
                    
                </a>
                
                    <div id="/products-sub-menu" class="sub-menu">
                        
                            <a class="sub-item" href="/">
                                INFINI Search
                            </a>
                        
                            <a class="sub-item" href="/products/console">
                                INFINI Console
                            </a>
                        
                            <a class="sub-item" href="/products/gateway">
                                INFINI Gateway
                            </a>
                        
                    </div>
                
            
                <a 
                    class="item" 
                    href="/pricing"
                    onclick=""
                >
                    报价
                    
                </a>
                
            
                <a 
                    class="item" 
                    href="/support"
                    onclick=""
                >
                    文档
                    
                </a>
                
            
                <a 
                    class="item" 
                    href="/download"
                    onclick=""
                >
                    下载
                    
                </a>
                
            
                <a 
                    class="item" 
                    href="/company"
                    onclick=""
                >
                    关于
                    
                </a>
                
            
        </div>
    </div>
</div>
<script>
    function onMenuTouch(visible) {
        const menu = document.getElementById("mobile-nav-menu");
        const menuIcon = document.getElementById("mobile-nav-menu-icon");
        const closeIcon = document.getElementById("mobile-nav-menu-close-icon");
        if (visible) {
            menuIcon.style.display = 'none';
            closeIcon.style.display = 'block';
            menu.style.display = 'block';
        } else {
            menuIcon.style.display = 'block';
            closeIcon.style.display = 'none';
            menu.style.display = 'none';
        }
    }
    function onMenuCollapse(href) {
        const arrow = document.getElementById("mobile-nav-menu-item-arrow");
        const subMenu = document.getElementById(`${href}-sub-menu`);
        if (arrow.getAttribute("data-active") === "true") {
            arrow.setAttribute("data-active", "false")
            arrow.setAttribute("src", "/img/header/mobile-menu-right.svg")
            subMenu.style.display="none"
        } else {
            arrow.setAttribute("data-active", "true")
            arrow.setAttribute("src", "/img/header/mobile-menu-bottom.svg")
            subMenu.style.display="block"
        }
    }
</script>

  <div class="docs resize-padding">
    <input type="checkbox" class="hidden toggle" id="menu-control" />
    <input type="checkbox" class="hidden toggle" id="toc-control" />
    <main class="container">
      <aside class="book-menu">
        
  <nav>
  

  
<div class="book-search">
  <input type="text" id="book-search-input" placeholder="搜索" aria-label="搜索" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>



  <div class="heading">
  <select class="version-selector">
    
      
        
        
          
          <option value="latest">latest</option>
        
      
    
      
    
      
        
        
      
        
        
      
    
      
    
      
    
      
    
      
    
  </select>
</div>


  
  





  
  





  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4616d45630e8955d56bb01dff137c835" class="toggle" checked />
    <label for="section-4616d45630e8955d56bb01dff137c835" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-4616d45630e8955d56bb01dff137c835')">
      <span style="margin-right: 3px">
        <img id="section-4616d45630e8955d56bb01dff137c835-arrow" src="/img/docs/arrow-down.png"/>
      </span>
      <a href="/docs/latest/gateway/" class="">INFINI Gateway</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/overview/" class="">产品概述</a>
    </label>
  

          
  <ul>
    
      
    
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-ca450a18766cdab3c2f7f6e45ea0fd7f" class="toggle"  />
    <label for="section-ca450a18766cdab3c2f7f6e45ea0fd7f" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-ca450a18766cdab3c2f7f6e45ea0fd7f')">
      <span style="margin-right: 3px">
        <img id="section-ca450a18766cdab3c2f7f6e45ea0fd7f-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a  class="">入门指南</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/getting-started/install/" class="">安装网关</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/getting-started/configuration/" class="">配置网关</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/getting-started/docker/" class="">容器部署</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/getting-started/optimization/" class="">系统调优</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/getting-started/benchmark/" class="">性能测试</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-05a026bf584b9f1242a1e8c2912be5ac" class="toggle" checked />
    <label for="section-05a026bf584b9f1242a1e8c2912be5ac" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-05a026bf584b9f1242a1e8c2912be5ac')">
      <span style="margin-right: 3px">
        <img id="section-05a026bf584b9f1242a1e8c2912be5ac-arrow" src="/img/docs/arrow-down.png"/>
      </span>
      <a  class="">功能手册</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/entry/" class="">服务入口</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/router/" class="">服务路由</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/flow/" class=" active">处理流程</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/elasticsearch/" class="">Elasticsearch</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/context/" class="">请求上下文</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5dd453f1fbec65f01797bcc920dfc980" class="toggle"  />
    <label for="section-5dd453f1fbec65f01797bcc920dfc980" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-5dd453f1fbec65f01797bcc920dfc980')">
      <span style="margin-right: 3px">
        <img id="section-5dd453f1fbec65f01797bcc920dfc980-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/" class="">在线过滤器</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/echo/" class="">echo</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/basic_auth/" class="">basic_auth</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/bulk_request_mutate/" class="">bulk_request_mutate</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/bulk_reshuffle/" class="">bulk_reshuffle</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/bulk_response_process/" class="">bulk_response_process</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/cache/" class="">cache</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/clone/" class="">clone</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/context_filter/" class="">context_filter</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/context_limiter/" class="">context_limiter</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/context_regex_replace/" class="">context_regex_replace</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/date_range_precision_tuning/" class="">date_range_precision_tuning</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/drop/" class="">drop</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/dump/" class="">dump</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/elasticsearch/" class="">elasticsearch</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/elasticsearch_health_check/" class="">elasticsearch_health_check</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/flow/" class="">flow</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/http/" class="">http</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/javascript/" class="">javascript</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/ldap_auth/" class="">ldap_auth</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/logging/" class="">logging</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/queue/" class="">queue</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/ratio/" class="">ratio</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/record/" class="">record</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/redirect/" class="">redirect</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/redis_pubsub/" class="">redis_pubsub</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/request_api_key_filter/" class="">request_api_key_filter</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/request_api_key_limiter/" class="">request_api_key_limiter</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/request_body_json_del/" class="">request_body_json_del</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/request_body_json_set/" class="">request_body_json_set</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/request_body_regex_replace/" class="">request_body_regex_replace</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/request_client_ip_filter/" class="">request_client_ip_filter</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/request_client_ip_limiter/" class="">request_client_ip_limiter</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/request_header_filter/" class="">request_header_filter</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/request_host_filter/" class="">request_host_filter</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/request_host_limiter/" class="">request_host_limiter</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/request_method_filter/" class="">request_method_filter</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/request_path_filter/" class="">request_path_filter</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/request_path_limiter/" class="">request_path_limiter</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/request_user_filter/" class="">request_user_filter</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/request_user_limiter/" class="">request_user_limiter</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/response_body_regex_replace/" class="">response_body_regex_replace</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/response_header_filter/" class="">response_header_filter</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/response_header_format/" class="">response_header_format</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/response_status_filter/" class="">response_status_filter</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/retry_limiter/" class="">retry_limiter</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/sample/" class="">sample</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/set_basic_auth/" class="">set_basic_auth</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/set_context/" class="">set_context</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/set_hostname/" class="">set_hostname</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/set_request_header/" class="">set_request_header</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/set_request_query_args/" class="">set_request_query_args</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/set_response/" class="">set_response</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/set_response_header/" class="">set_response_header</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/sleep/" class="">sleep</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/switch/" class="">switch</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/filters/translog/" class="">translog</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-103a5936120880cd795a0929db3146d3" class="toggle"  />
    <label for="section-103a5936120880cd795a0929db3146d3" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-103a5936120880cd795a0929db3146d3')">
      <span style="margin-right: 3px">
        <img id="section-103a5936120880cd795a0929db3146d3-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a href="/docs/latest/gateway/references/processors/" class="">离线处理器</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/processors/bulk_indexing/" class="">bulk_indexing</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/processors/dag/" class="">dag</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/processors/dump_hash/" class="">dump_hash</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/processors/flow_runner/" class="">flow_runner</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/processors/index_diff/" class="">index_diff</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/processors/indexing_merge/" class="">indexing_merge</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/processors/json_indexing/" class="">json_indexing</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/processors/queue_consumer/" class="">queue_consumer</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/processors/replay/" class="">replay</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-33bfbb089d34add70f0cf8c1bbb737ca" class="toggle"  />
    <label for="section-33bfbb089d34add70f0cf8c1bbb737ca" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-33bfbb089d34add70f0cf8c1bbb737ca')">
      <span style="margin-right: 3px">
        <img id="section-33bfbb089d34add70f0cf8c1bbb737ca-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a  class="">功能组件</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/modules/floating_ip/" class="">浮动 IP</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/modules/force_merge/" class="">索引段合并</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/references/config/" class="">其它配置</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-715dfb189dadb35e167d8bbe4be8a0de" class="toggle"  />
    <label for="section-715dfb189dadb35e167d8bbe4be8a0de" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-715dfb189dadb35e167d8bbe4be8a0de')">
      <span style="margin-right: 3px">
        <img id="section-715dfb189dadb35e167d8bbe4be8a0de-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a  class="">开发手册</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-12cdfae9d2d2403beef257d78221dada" class="toggle"  />
    <label for="section-12cdfae9d2d2403beef257d78221dada" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-12cdfae9d2d2403beef257d78221dada')">
      <span style="margin-right: 3px">
        <img id="section-12cdfae9d2d2403beef257d78221dada-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a  class="">API 手册</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b108b5500f0312aa3f979f4f88301810" class="toggle"  />
    <label for="section-b108b5500f0312aa3f979f4f88301810" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-b108b5500f0312aa3f979f4f88301810')">
      <span style="margin-right: 3px">
        <img id="section-b108b5500f0312aa3f979f4f88301810-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a  class="">插件开发</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-fa1be11a429200bbbced085f652455ec" class="toggle"  />
    <label for="section-fa1be11a429200bbbced085f652455ec" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-fa1be11a429200bbbced085f652455ec')">
      <span style="margin-right: 3px">
        <img id="section-fa1be11a429200bbbced085f652455ec-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a  class="">动手教程</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/tutorial/log4j2_filtering/" class="">Apache Log4j 漏洞处置</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/tutorial/online_query_rewrite/" class="">在线查询修复的实现</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/tutorial/request-logging/" class="">查询请求流量日志分析</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/tutorial/index_diff/" class="">索引文档级别差异对比</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/tutorial/es-hadoop_integration/" class="">与 Elasticsearch-Hadoop 集成</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/tutorial/prometheus_integration/" class="">与 Prometheus 集成</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/tutorial/proxy_elasticsearch/" class="">为 Elasticsearch 无缝添加代理和基础安全</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/tutorial/proxy_kibana/" class="">为 Kibana 添加代理和基础安全</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/tutorial/path_rewrite_by_javascript/" class="">使用 JavaScript 脚本来进行复杂的查询改写</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/tutorial/fix_count_in_search_response/" class="">兼容不同版本的响应 Count 结构</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/tutorial/routing_to_cluser_by_index/" class="">在 Kibana 里统一访问来自不同集群的索引</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-fda12f0081216dc7e8fb0ff3676d3b34" class="toggle"  />
    <label for="section-fda12f0081216dc7e8fb0ff3676d3b34" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-fda12f0081216dc7e8fb0ff3676d3b34')">
      <span style="margin-right: 3px">
        <img id="section-fda12f0081216dc7e8fb0ff3676d3b34-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a href="/docs/latest/gateway/user-cases/" class="">用户案例</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/user-cases/stories/a_cross_region_cluster_access_locality/" class="">作业帮跨云集群的就近本地访问</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/user-cases/stories/indexing_speedup_for_big_index_rebuild/" class="">某保险业务索引速度百倍提升</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/troubleshooting/" class="">常见问题</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/release-notes/" class="">版本历史</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/gateway/resources/" class="">其它资源</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5178456a1cbc2539cefefbad5a3d2c59" class="toggle"  />
    <label for="section-5178456a1cbc2539cefefbad5a3d2c59" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-5178456a1cbc2539cefefbad5a3d2c59')">
      <span style="margin-right: 3px">
        <img id="section-5178456a1cbc2539cefefbad5a3d2c59-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a href="/docs/latest/console/" class="">INFINI Console</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-8286e9a0e7e6e51137a485dda4a719bf" class="toggle"  />
    <label for="section-8286e9a0e7e6e51137a485dda4a719bf" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-8286e9a0e7e6e51137a485dda4a719bf')">
      <span style="margin-right: 3px">
        <img id="section-8286e9a0e7e6e51137a485dda4a719bf-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a  class="">入门指南</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/getting-started/install/" class="">下载安装</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/getting-started/ilm/" class="">索引设置</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/getting-started/docker/" class="">容器部署</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-dbbcdb8f5353d3ea7d8269a7ae1da12f" class="toggle"  />
    <label for="section-dbbcdb8f5353d3ea7d8269a7ae1da12f" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-dbbcdb8f5353d3ea7d8269a7ae1da12f')">
      <span style="margin-right: 3px">
        <img id="section-dbbcdb8f5353d3ea7d8269a7ae1da12f-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a  class="">功能手册</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/initialization/" class="">初始化向导</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-84408b883ce772abccd396f1a36e3244" class="toggle"  />
    <label for="section-84408b883ce772abccd396f1a36e3244" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-84408b883ce772abccd396f1a36e3244')">
      <span style="margin-right: 3px">
        <img id="section-84408b883ce772abccd396f1a36e3244-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a  class="">平台管理</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/platform/overview/" class="">平台概览</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/platform/monitoring/" class="">集群监控</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/devtool/" class="">开发工具</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-dffa2b897817613f204cce2b718f8bbb" class="toggle"  />
    <label for="section-dffa2b897817613f204cce2b718f8bbb" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-dffa2b897817613f204cce2b718f8bbb')">
      <span style="margin-right: 3px">
        <img id="section-dffa2b897817613f204cce2b718f8bbb-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a href="/docs/latest/console/reference/data/" class="">数据管理</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/data/indices/" class="">索引管理</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/data/alias/" class="">别名管理</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/data/view/" class="">数据视图</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/data/discover/" class="">数据探索</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6436e4991d731941a4d0e281d4856375" class="toggle"  />
    <label for="section-6436e4991d731941a4d0e281d4856375" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-6436e4991d731941a4d0e281d4856375')">
      <span style="margin-right: 3px">
        <img id="section-6436e4991d731941a4d0e281d4856375-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a  class="">告警管理</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/alerting/message/" class="">告警中心</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/alerting/rule/" class="">告警规则</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/alerting/channel/" class="">告警渠道</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/alerting/variables/" class="">模板变量</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-78f9aaa86ae46a34010fc5c2d0dad327" class="toggle"  />
    <label for="section-78f9aaa86ae46a34010fc5c2d0dad327" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-78f9aaa86ae46a34010fc5c2d0dad327')">
      <span style="margin-right: 3px">
        <img id="section-78f9aaa86ae46a34010fc5c2d0dad327-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a  class="">容灾备份</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/migration/migration/" class="">数据迁移</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-667b57d8ae873257aab4220429d975fc" class="toggle"  />
    <label for="section-667b57d8ae873257aab4220429d975fc" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-667b57d8ae873257aab4220429d975fc')">
      <span style="margin-right: 3px">
        <img id="section-667b57d8ae873257aab4220429d975fc-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a  class="">系统管理</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/system/cluster/" class="">集群管理</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/system/command/" class="">常用命令</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c7bebc8f98fcaa08dd4f75f9eb95f908" class="toggle"  />
    <label for="section-c7bebc8f98fcaa08dd4f75f9eb95f908" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-c7bebc8f98fcaa08dd4f75f9eb95f908')">
      <span style="margin-right: 3px">
        <img id="section-c7bebc8f98fcaa08dd4f75f9eb95f908-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a href="/docs/latest/console/reference/system/security/" class="">安全设置</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/system/security/user/" class="">用户管理</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/system/security/role/" class="">角色管理</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/system/security/settings/" class="">安全设置</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-41ac5e62f76e0ab83678c61a610393a3" class="toggle"  />
    <label for="section-41ac5e62f76e0ab83678c61a610393a3" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-41ac5e62f76e0ab83678c61a610393a3')">
      <span style="margin-right: 3px">
        <img id="section-41ac5e62f76e0ab83678c61a610393a3-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a  class="">探针管理</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/agent/manage/manage/" class="">功能介绍</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/agent/install/install/" class="">下载安装</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/reference/agent/install/docker/" class="">容器部署</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/screenshot/" class="">系统截图</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0485a68023e454463868fa634c87f75c" class="toggle"  />
    <label for="section-0485a68023e454463868fa634c87f75c" class="flex" style="align-items: center;" onclick="onDocsMenuClick('section-0485a68023e454463868fa634c87f75c')">
      <span style="margin-right: 3px">
        <img id="section-0485a68023e454463868fa634c87f75c-arrow" src="/img/docs/arrow-right.png"/>
      </span>
      <a  class="">动手教程</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/tutorials/start_with_specify_user/" class="">如何指定内置账户名和密码启动 INFINI Console</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/tutorials/create_readonly_account/" class="">如何轻松创建一个 Elasticsearch “游客” 用户</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/tutorials/role_with_different_rights/" class="">如何给不同 INFINI Console 账户分配不同 Elasticsearch 集群访问权限</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/tutorials/role_with_index_limit/" class="">如何给 INFINI Console 账户分配 Elasticsearch 索引级别权限</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/tutorials/cluster_slow_request/" class="">如何监控 Elasticsearch 里面的慢查询请求</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/tutorials/cluster_health_change/" class="">如何监控 Elasticsearch 集群健康状态</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/tutorials/cluster_node_disk_usage/" class="">如何监控 Elasticsearch 集群节点磁盘使用率</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/tutorials/cluster_node_cpu_usage/" class="">如何监控 Elasticsearch 集群节点的 CPU 使用率</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/tutorials/cluster_node_jvm_usage/" class="">如何监控 Elasticsearch 集群节点的 JVM 使用率</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/tutorials/data_migration/" class="">如何使用 INFINI 迁移功能</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/user-cases/" class="">用户案例</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/troubleshooting/" class="">常见问题</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/release-notes/" class="">版本历史</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/upgrade/" class="">版本更新</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/console/resources/" class="">其它资源</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <label class="flex" style="align-items: center;">
      <span style="margin-right: 3px">
          <img src="/img/docs/point.png"/>
      </span>
      <a href="/docs/latest/release-notes/" class="">Release notes</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>







  

  




  


  


  

  


  


<div class="book-languages" tabindex="0" aria-haspopup="true">
  <ul>
    <li class="flex align-center">
      <img src="/svg/translate.svg" class="book-icon" alt="Languages" />
      简体中文
    </li> 
  </ul>

  <ul class="book-languages-list">
    
    <li class="active">
      <a href="/" class="flex align-center">
        <img src="/svg/translate.svg" class="book-icon" alt="Languages" />
        简体中文
      </a>
    </li>
    
    <li class="">
      <a href="/en/docs/latest/gateway/references/flow/" class="flex align-center">
        <img src="/svg/translate.svg" class="book-icon" alt="Languages" />
        English
      </a>
    </li>
    
  </ul>
</div>

  

  


</nav>




<script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
      </aside>

      <div class="book-page">
        <header class="book-header">
          
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>处理流程</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav id="TableOfContents">
  <ul>
    <li><a href="#处理流程">处理流程</a>
      <ul>
        <li><a href="#流程定义">流程定义</a>
          <ul>
            <li><a href="#语法说明">语法说明</a></li>
          </ul>
        </li>
        <li><a href="#条件判断">条件判断</a>
          <ul>
            <li><a href="#参数说明">参数说明</a></li>
          </ul>
        </li>
        <li><a href="#条件类型">条件类型</a>
          <ul>
            <li><a href="#equals">equals</a></li>
            <li><a href="#contains">contains</a></li>
            <li><a href="#prefix">prefix</a></li>
            <li><a href="#suffix">suffix</a></li>
            <li><a href="#regexp">regexp</a></li>
            <li><a href="#range">range</a></li>
            <li><a href="#network">network</a></li>
            <li><a href="#has_fields">has_fields</a></li>
            <li><a href="#in">in</a></li>
            <li><a href="#queue_has_lag">queue_has_lag</a></li>
            <li><a href="#consumer_has_lag">consumer_has_lag</a></li>
            <li><a href="#cluster_available">cluster_available</a></li>
            <li><a href="#or">or</a></li>
            <li><a href="#and">and</a></li>
            <li><a href="#not">not</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>


  </aside>
  
 
        </header>

        <div  class="infini-breadcrumb">
    
    
        
    
        
    
        
    
        
    
        
    
    

    
    

    
    
    <span>></span>
        
            文档中心
        
    

    
    
    <span>></span>
        
            <a href="/docs/latest/gateway/">INFINI Gateway</a>
        
    

    
    
    <span>></span>
        
            功能手册
        
    

    
    
    <span>></span>
        
            <a href="/docs/latest/gateway/references/flow/">处理流程</a>
        
    

</div>


        
  <article class="markdown"><h1 id="处理流程">
  处理流程
  <a class="anchor" href="#%e5%a4%84%e7%90%86%e6%b5%81%e7%a8%8b">#</a>
</h1>
<h2 id="流程定义">
  流程定义
  <a class="anchor" href="#%e6%b5%81%e7%a8%8b%e5%ae%9a%e4%b9%89">#</a>
</h2>
<p>每一个网关接收到的请求都会通过一系列的流程处理，最后才返回给客户端，流程的定义在极限网关里面叫做 <code>flow</code>，以下面的这个例子为例：</p>
<pre><code>flow:
  - name: hello_world
    filter:
      - echo:
          message: &quot;hello gateway\n&quot;
          repeat: 1
  - name: not_found
    filter:
      - echo:
          message: '404 not found\n'
          repeat: 1
</code></pre><p>上面的例子定义了两个 flow <code>hello_world</code> 和 <code>not_found</code>，
每个 flow 都使用了一个名为 <code>echo</code> 的过滤器，用来输出一段字符串，每个 flow 下面可以定义一系列 filter，他们按照定义的顺序依次执行。</p>
<h3 id="语法说明">
  语法说明
  <a class="anchor" href="#%e8%af%ad%e6%b3%95%e8%af%b4%e6%98%8e">#</a>
</h3>
<p>极限网关采用约定的格式来定义流程，并且支持灵活的条件参数来进行逻辑判断，具体的格式定义如下：</p>
<pre><code>flow:
  - name: &lt;flow_name&gt;
    filter:
      - &lt;filter_name&gt;:
          when:
            &lt;condition&gt;
          &lt;parameters&gt;    
      - &lt;filter_name&gt;:
          when:
            &lt;condition&gt;
          &lt;parameters&gt;
    ...
</code></pre><p>上面的 <code>filter_name</code> 代表具体的某个过滤器名称，用来执行特定的任务，<code>when</code> 下面的 <code>condition</code> 用来定义特定的满足执行该任务的条件参数，不满足条件的情况下会跳过该过滤器任务的执行，<code>parameters</code> 里面设置的该过滤器相关的参数，如果多个参数依次换行即可。</p>
<h2 id="条件判断">
  条件判断
  <a class="anchor" href="#%e6%9d%a1%e4%bb%b6%e5%88%a4%e6%96%ad">#</a>
</h2>
<p>极限网关的流程定义支持复杂的逻辑判断，可以让特定的过滤器只有在满足某种条件下才会执行，举例如下：</p>
<pre><code>filter:
  - if:
      &lt;condition&gt;
    then: 
      - &lt;filter_name&gt;:
          &lt;parameters&gt;
      - &lt;filter_name&gt;:
          &lt;parameters&gt;
      ...
    else: 
      - &lt;filter_name&gt;:
          &lt;parameters&gt;
      - &lt;filter_name&gt;:
          &lt;parameters&gt;
      ...
</code></pre><h3 id="参数说明">
  参数说明
  <a class="anchor" href="#%e5%8f%82%e6%95%b0%e8%af%b4%e6%98%8e">#</a>
</h3>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>then</td>
<td>array</td>
<td>表示满足 <code>condition</code> 条件定义后才会执行的一系列过滤器定义</td>
</tr>
<tr>
<td>else</td>
<td>array</td>
<td>不满足条件才会执行的一系列过滤器定义，可不设置</td>
</tr>
</tbody>
</table>
<p>使用 <code>if</code> 可以对多个 filter 来进行条件判断进行逻辑选择，使用 <code>when</code> 来对单个过滤器进行判断是否执行。</p>
<h2 id="条件类型">
  条件类型
  <a class="anchor" href="#%e6%9d%a1%e4%bb%b6%e7%b1%bb%e5%9e%8b">#</a>
</h2>
<p>在流程里面定义的各种 <code>condition</code> 条件可以使用当前
  <a href="/docs/latest/gateway/references/context/">请求上下文</a> 来判断是否满足特定条件，从而实现逻辑处理，支持布尔表达式（AND、NOT、OR）来进行组合，完整的条件类型如下：</p>
<ul>
<li>equals</li>
<li>contains</li>
<li>prefix</li>
<li>suffix</li>
<li>regexp</li>
<li>range</li>
<li>network</li>
<li>has_fields</li>
<li>in</li>
<li>queue_has_lag</li>
<li>consumer_has_lag</li>
<li>cluster_available</li>
<li>or</li>
<li>and</li>
<li>not</li>
</ul>
<h3 id="equals">
  equals
  <a class="anchor" href="#equals">#</a>
</h3>
<p>使用 <code>equals</code> 条件来判断字段的内容是否为指定的值，用于字符和数字类型的精确匹配。</p>
<p>如下面的例子判断是否请求的方法是否为 GET 类型，<code>_ctx</code> 是访问请求上下文的特定关键字：</p>
<pre><code>equals:
  _ctx.request.method: GET
</code></pre><h3 id="contains">
  contains
  <a class="anchor" href="#contains">#</a>
</h3>
<p>使用 <code>contains</code> 条件来判断字段的内容是否包含特定的字符值，仅支持字符字段类型。</p>
<p>如下面的例子为判断返回的请求体里面是否包含错误关键字：</p>
<pre><code>contains:
  _ctx.response.body: &quot;error&quot;
</code></pre><h3 id="prefix">
  prefix
  <a class="anchor" href="#prefix">#</a>
</h3>
<p>使用 <code>prefix</code> 条件来判断字段的内容是否由特定的字符值开头，仅支持字符字段类型。</p>
<p>如下面的例子为判断返回的请求路径为特定索引名称开头：</p>
<pre><code>prefix:
  _ctx.request.path: &quot;/filebeat&quot;
</code></pre><h3 id="suffix">
  suffix
  <a class="anchor" href="#suffix">#</a>
</h3>
<p>使用 <code>suffix</code> 条件来判断字段的内容是否由特定的字符值结尾，仅支持字符字段类型。</p>
<p>如下面的例子为判断返回的请求是否为搜索请求：</p>
<pre><code>suffix:
  _ctx.request.path: &quot;/_search&quot;
</code></pre><h3 id="regexp">
  regexp
  <a class="anchor" href="#regexp">#</a>
</h3>
<p>使用 <code>regexp</code> 条件可以用来判断某个字段的内容是否满足正则表达式的匹配规则，仅支持字符字段类型。</p>
<p>如下面的例子判断请求的 uri 是否为查询请求：</p>
<pre><code>regexp:
  _ctx.request.uri: &quot;.*/_search&quot;
</code></pre><h3 id="range">
  range
  <a class="anchor" href="#range">#</a>
</h3>
<p>使用 <code>range</code> 条件用来判断字段的值是否满足特定的范围，支持 <code>lt</code>、<code>lte</code>、<code>gt</code> 和 <code>gte</code> 几种类型，仅支持数字字段类型。</p>
<p>如下面判断状态码范围的例子：</p>
<pre><code>range:
  _ctx.response.code:
    gte: 400
</code></pre><p>以及如下组合来判断响应字节大小范围的例子：</p>
<pre><code>range:
  _ctx.request.body_length.gte: 100
  _ctx.request.body_length.lt: 5000
</code></pre><h3 id="network">
  network
  <a class="anchor" href="#network">#</a>
</h3>
<p>如果某个字段的值为 IP 字段类型，可以使用 <code>network</code> 条件可以判断该字段是否满足某个特定的网络范围，支持标准的 IPv4 和 IPv6，支持 CIDR 的表达方式，或者是以下范围别名：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>loopback</td>
<td>匹配本地回环网络地址，范围：<code>127.0.0.0/8</code> 或者 <code>::1/128</code>。</td>
</tr>
<tr>
<td>unicast</td>
<td>匹配 RFC 1122、RFC 4632 和 RFC 4291 中定义的全球单播地址，但 IPv4 广播地址 (255.255.255.255) 除外。包括私有地址范围。</td>
</tr>
<tr>
<td>multicast</td>
<td>匹配广播地址。</td>
</tr>
<tr>
<td>interface_local_multicast</td>
<td>匹配 IPv6 接口本地组播地址。</td>
</tr>
<tr>
<td>link_local_unicast</td>
<td>匹配链路本地单播地址。</td>
</tr>
<tr>
<td>link_local_multicast</td>
<td>匹配链路本地广播地址。</td>
</tr>
<tr>
<td>private</td>
<td>匹配 RFC 1918 (IPv4) 和 RFC 4193 (IPv6) 中定义的私有地址范围。</td>
</tr>
<tr>
<td>public</td>
<td>匹配除了本机、未指定、IPv4 广播、链路本地单播、链路本地多播、接口本地多播或私有地址以外的公网地址。</td>
</tr>
<tr>
<td>unspecified</td>
<td>匹配未指定的地址（IPv4 地址 <code>0.0.0.0</code> 或 IPv6 地址 <code>::</code> ）。</td>
</tr>
</tbody>
</table>
<p>如下面的例子匹配本机网络地址：</p>
<pre><code>network:
  _ctx.request.client_ip: private
</code></pre><p>或者指定一个子网：</p>
<pre><code>network:
  _ctx.request.client_ip: '192.168.3.0/24'
</code></pre><p>支持数组，任意满足即可：</p>
<pre><code>network:
  _ctx.request.client_ip: ['192.168.3.0/24', '10.1.0.0/8', loopback]
</code></pre><h3 id="has_fields">
  has_fields
  <a class="anchor" href="#has_fields">#</a>
</h3>
<p>如果要判断某个字段是否存在，可以使用 <code>has_fields</code>，支持一个或者多个字符字段，如下：</p>
<pre><code>has_fields: ['_ctx.request.user']
</code></pre><h3 id="in">
  in
  <a class="anchor" href="#in">#</a>
</h3>
<p>如果要判断某个字段是否存在指定数组的任意值，可以使用 <code>in</code>，支持单个字段的判断，仅支持字符和数值类型。</p>
<p>如下判断返回状态码：</p>
<pre><code>in:
  _ctx.response.status: [ 403,404,200,201 ]
</code></pre><h3 id="queue_has_lag">
  queue_has_lag
  <a class="anchor" href="#queue_has_lag">#</a>
</h3>
<p>使用 <code>queue_has_lag</code> 可以来判断某个或多个本地磁盘队列是否存在堆积的情况，如下：</p>
<pre><code>queue_has_lag: [ &quot;prod&quot;, &quot;prod-500&quot; ]
</code></pre><p>如果希望设置队列大于指定深度可以在队列的名称后面加上 <code>&gt;队列深度</code>，如：</p>
<pre><code>queue_has_lag: [ &quot;prod&gt;10&quot;, &quot;prod-500&gt;10&quot; ]
</code></pre><p>上面的例子表示，只有当队列深度超过 <code>10</code> 的情况下才满足条件。</p>
<h3 id="consumer_has_lag">
  consumer_has_lag
  <a class="anchor" href="#consumer_has_lag">#</a>
</h3>
<p>使用 <code>consumer_has_lag</code> 可以来判断某个队列的消费者是否存在延迟堆积的情况，如下：</p>
<pre><code>consumer_has_lag:
  queue: &quot;primary-partial-success_bulk_requests&quot;
  group: &quot;my-group&quot;
  name: &quot;my-consumer-1&quot;
</code></pre><h3 id="cluster_available">
  cluster_available
  <a class="anchor" href="#cluster_available">#</a>
</h3>
<p>使用 <code>cluster_available</code> 可以判断某个或多个 Elasticsearch 集群的服务可用性，如下：</p>
<pre><code>cluster_available: [&quot;prod&quot;]
</code></pre><h3 id="or">
  or
  <a class="anchor" href="#or">#</a>
</h3>
<p>使用 <code>or</code> 来组合多个任意可选条件，格式如下：</p>
<pre><code>or:
  - &lt;condition1&gt;
  - &lt;condition2&gt;
  - &lt;condition3&gt;
  ...
</code></pre><p>举例如下：</p>
<pre><code>or:
  - equals:
      _ctx.response.code: 304
  - equals:
      _ctx.response.code: 404
</code></pre><h3 id="and">
  and
  <a class="anchor" href="#and">#</a>
</h3>
<p>使用 <code>and</code> 来组合多个必要条件，格式如下：</p>
<pre><code>and:
  - &lt;condition1&gt;
  - &lt;condition2&gt;
  - &lt;condition3&gt;
  ...
</code></pre><p>举例如下：</p>
<pre><code>and:
  - equals:
      _ctx.response.code: 200
  - equals:
      _ctx.status: OK
</code></pre><p>还可以对 <code>and</code> 和 <code>or</code> 条件进行灵活组合，如下：</p>
<pre><code>or:
  - &lt;condition1&gt;
  - and:
    - &lt;condition2&gt;
    - &lt;condition3&gt;
</code></pre><h3 id="not">
  not
  <a class="anchor" href="#not">#</a>
</h3>
<p>如果要对某个条件取反，使用 <code>not</code> 即可，格式如下：</p>
<pre><code>not:
  &lt;condition&gt;
</code></pre><p>举例如下：</p>
<pre><code>not:
  equals:
    _ctx.status: OK
</code></pre></article>
 
        

        <footer class="book-footer">
          
  <div class="flex flex-wrap justify-between">
  






  <script>
    (function(h,o,t,j,a,r){
      h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
      h._hjSettings={hjid:2716856,hjsv:6};
      a=o.getElementsByTagName('head')[0];
      r=o.createElement('script');r.async=1;
      r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
      a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
  </script>


  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-L0XH1C4CVP"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-L0XH1C4CVP');
  </script>

  
<script type="text/javascript">
    var _smartsupp = _smartsupp || {};
    _smartsupp.key = '691ff544d18a237005a011a7290b839d8fe811a4';
    window.smartsupp||(function(d) {
      var s,c,o=smartsupp=function(){ o._.push(arguments)};o._=[];
      s=d.getElementsByTagName('script')[0];c=d.createElement('script');
      c.type='text/javascript';c.charset='utf-8';c.async=true;
      c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);
    })(document);
  </script>

</div>

 
          
        </footer>

        
  
 

        <label for="menu-control" class="hidden book-menu-overlay"></label>
      </div>

      
      <aside class="book-toc">
        
  <nav id="TableOfContents">
  <ul>
    <li><a href="#处理流程">处理流程</a>
      <ul>
        <li><a href="#流程定义">流程定义</a>
          <ul>
            <li><a href="#语法说明">语法说明</a></li>
          </ul>
        </li>
        <li><a href="#条件判断">条件判断</a>
          <ul>
            <li><a href="#参数说明">参数说明</a></li>
          </ul>
        </li>
        <li><a href="#条件类型">条件类型</a>
          <ul>
            <li><a href="#equals">equals</a></li>
            <li><a href="#contains">contains</a></li>
            <li><a href="#prefix">prefix</a></li>
            <li><a href="#suffix">suffix</a></li>
            <li><a href="#regexp">regexp</a></li>
            <li><a href="#range">range</a></li>
            <li><a href="#network">network</a></li>
            <li><a href="#has_fields">has_fields</a></li>
            <li><a href="#in">in</a></li>
            <li><a href="#queue_has_lag">queue_has_lag</a></li>
            <li><a href="#consumer_has_lag">consumer_has_lag</a></li>
            <li><a href="#cluster_available">cluster_available</a></li>
            <li><a href="#or">or</a></li>
            <li><a href="#and">and</a></li>
            <li><a href="#not">not</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>

 
      </aside>
      
    </main>

    

    

  </div>

  <div class="common-footer resize-padding">
  <div class="top">
    
    <dl class="menu-item">
      <dt>产品</dt>
      
        
          <dd>
            
            <a href="#" target="_self">
              INFINI Search
            </a>
          </dd>
        
          <dd>
            
            <a href="#" target="_self">
              INFINI Scale
            </a>
          </dd>
        
          <dd>
            
            <a href="/products/gateway" target="_self">
              INFINI Gateway
            </a>
          </dd>
        
          <dd>
            
            <a href="/products/console" target="_self">
              INFINI Console
            </a>
          </dd>
        
      
    </dl>
  
    <dl class="menu-item">
      <dt>解决方案</dt>
      
        
          <dd>
            
            <a href="#" target="_self">
              实时搜索引擎
            </a>
          </dd>
        
          <dd>
            
            <a href="#" target="_self">
              查询优化分析
            </a>
          </dd>
        
          <dd>
            
            <a href="#" target="_self">
              异地容灾建设
            </a>
          </dd>
        
          <dd>
            
            <a href="#" target="_self">
              搜索平台建设
            </a>
          </dd>
        
      
    </dl>
  
    <dl class="menu-item">
      <dt>支持</dt>
      
        
          <dd>
            
            <a href="/support" target="_self">
              常见问题
            </a>
          </dd>
        
          <dd>
            
            <a href="/support" target="_self">
              动手教程
            </a>
          </dd>
        
          <dd>
            
            <a href="/support" target="_self">
              文档中心
            </a>
          </dd>
        
          <dd>
            
            <a href="/download" target="_self">
              下载中心
            </a>
          </dd>
        
      
    </dl>
  
    <dl class="menu-item">
      <dt>关于我们</dt>
      
        
          <dd>
            
            <a href="/company" target="_self">
              公司简介
            </a>
          </dd>
        
          <dd>
            
            <a href="/company" target="_self">
              联系我们
            </a>
          </dd>
        
          <dd>
            
            <a href="/career" target="_self">
              工作机会
            </a>
          </dd>
        
      
    </dl>
  
  <div class="others">
    <div class="contact">
      <span class="item">
        <img src="/img/footer/phone.svg" />
        <span>400-139-9200</span>
      </span>
      <a class="item" href="mailto://hello@infini.ltd" target="_blank">
        <img src="/img/footer/email.svg" />
        <span>hello@infini.ltd</span>
      </a>
    </div>
    <div class="logos">
      <a class="item infini-tooltip">
        <img src="/img/footer/wechat.svg" />
        <div class="infini-tooltip-content">
          <img
            class="tooltip-wechart-qrcode"
            src="/img/footer/wechat_qrcode_infini_labs.jpg"
          />
        </div>
      </a>
      <a
          href="https://space.bilibili.com/1171585214"
          target="_blank"
        >
          <img src="/img/footer/bilibili.svg" />
      </a>
      <a href="https://twitter.com/infinilabs" target="_blank">
          <img src="/img/footer/twitter.svg" />
      </a>
      <a href="https://github.com/infinilabs" target="_blank">
          <img src="/img/footer/github.svg" />
      </a>
    </div>
  </div>
  </div>
  <div class="bottom">
    <div class="copy-right">
      <a href="/" class="logo"></a>
      <span class="text">Copyright &copy; 2022 INFINI Labs </span>
    </div>
    <button class="lang">
      <img src="/img/footer/lang.svg" />
      <span>&nbsp;中文</span>
    </button>
  </div>
</div>

  <script>
    function onDocsMenuClick(id) {
      const icon = document.getElementById(`${id}-arrow`);
      if (icon.getAttribute("src").includes("down")) {
        icon.src = "/img/docs/arrow-right.png"
      } else {
        icon.src = "/img/docs/arrow-down.png"
      }
    }
  </script>

</body>

</html>












